<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Distribution </title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Optimization common toolings</span> <span class="project-version">2.3.2</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="distribution.html"><div class="inner"><span>Distribution </span></div></a></li><li class="depth-1 "><a href="prng.html"><div class="inner"><span>prng</span></div></a></li><li class="depth-1 "><a href="time_based.html"><div class="inner"><span>Time-based features.</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>automaton-optimization</span></div></div></li><li class="depth-2"><a href="automaton-optimization.distribution.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>distribution</span></div></a></li><li class="depth-3 branch"><a href="automaton-optimization.distribution.distribution-protocol.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>distribution-protocol</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-4 branch"><a href="automaton-optimization.distribution.impl.exponential.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>exponential</span></div></a></li><li class="depth-4 branch"><a href="automaton-optimization.distribution.impl.factory.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>factory</span></div></a></li><li class="depth-4 branch"><a href="automaton-optimization.distribution.impl.kixi-stats.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kixi-stats</span></div></a></li><li class="depth-4 branch"><a href="automaton-optimization.distribution.impl.uniform.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>uniform</span></div></a></li><li class="depth-4"><a href="automaton-optimization.distribution.impl.uniform-integer.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>uniform-integer</span></div></a></li><li class="depth-3"><a href="automaton-optimization.distribution.registry.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>registry</span></div></a></li><li class="depth-2"><a href="automaton-optimization.maths.html"><div class="inner"><span class="tree" style="top: -269px;"><span class="top" style="height: 278px;"></span><span class="bottom"></span></span><span>maths</span></div></a></li><li class="depth-3"><a href="automaton-optimization.maths.gamma.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>gamma</span></div></a></li><li class="depth-2"><a href="automaton-optimization.prng.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>prng</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-4 branch"><a href="automaton-optimization.prng.impl.built-in.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>built-in</span></div></a></li><li class="depth-4 branch"><a href="automaton-optimization.prng.impl.tests.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tests</span></div></a></li><li class="depth-4 branch"><a href="automaton-optimization.prng.impl.well.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>well</span></div></a></li><li class="depth-4 branch"><a href="automaton-optimization.prng.impl.well-macros.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>well-macros</span></div></a></li><li class="depth-4"><a href="automaton-optimization.prng.impl.xoroshiro128.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>xoroshiro128</span></div></a></li><li class="depth-3 branch"><a href="automaton-optimization.prng.stateful.html"><div class="inner"><span class="tree" style="top: -176px;"><span class="top" style="height: 185px;"></span><span class="bottom"></span></span><span>stateful</span></div></a></li><li class="depth-3 branch"><a href="automaton-optimization.prng.stateful-wrapper.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stateful-wrapper</span></div></a></li><li class="depth-3"><a href="automaton-optimization.prng.stateless.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>stateless</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>sample</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-4 branch"><a href="automaton-optimization.sample.impl.number-set.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>number-set</span></div></a></li><li class="depth-4"><a href="automaton-optimization.sample.impl.vector.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>vector</span></div></a></li><li class="depth-3"><a href="automaton-optimization.sample.sample-protocol.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>sample-protocol</span></div></a></li><li class="depth-2"><a href="automaton-optimization.time-based.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>time-based</span></div></a></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>impl</span></div></div></li><li class="depth-4 branch"><a href="automaton-optimization.time-based.impl.aggregate.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aggregate</span></div></a></li><li class="depth-4 branch"><a href="automaton-optimization.time-based.impl.aggregates.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aggregates</span></div></a></li><li class="depth-4 branch"><a href="automaton-optimization.time-based.impl.aggregator.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aggregator</span></div></a></li><li class="depth-4 branch"><a href="automaton-optimization.time-based.impl.aggregator-item.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aggregator-item</span></div></a></li><li class="depth-4"><a href="automaton-optimization.time-based.impl.storage-strategy.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>storage-strategy</span></div></a></li><li class="depth-5 branch"><a href="automaton-optimization.time-based.impl.storage-strategy.contiguous.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>contiguous</span></div></a></li><li class="depth-5"><a href="automaton-optimization.time-based.impl.storage-strategy.deltas.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>deltas</span></div></a></li><li class="depth-4 branch"><a href="automaton-optimization.time-based.impl.var-additive.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>var-additive</span></div></a></li><li class="depth-4 branch"><a href="automaton-optimization.time-based.impl.var-aggregated.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>var-aggregated</span></div></a></li><li class="depth-4"><a href="automaton-optimization.time-based.impl.var-latest.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>var-latest</span></div></a></li><li class="depth-3"><a href="automaton-optimization.time-based.protocol.html"><div class="inner"><span class="tree" style="top: -331px;"><span class="top" style="height: 340px;"></span><span class="bottom"></span></span><span>protocol</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#distribution" id="distribution"></a>Distribution</h1>
<p>A <code>distribution</code> is defining what are the frequencies of each value return by the <code>prng</code>. Optimization method use distribution to mimic natural random behavior.</p>
<ul>
<li><a href="#distribution">Distribution</a></li>
<li><a href="#quick-start">Quick start</a></li>
<li><a href="#existing-distributions">Existing distributions</a></li>
<li><a href="#enriching-the-library-with-a-new-distribution">Enriching the library with a new distribution</a></li>
</ul>
<h1><a href="#quick-start" id="quick-start"></a>Quick start</h1>
<p>The easiest way to draw a number from a distribution is:</p>
<pre><code class="language-clojure">(require '[automaton-optimization.distribution :refer :all]
         '[automaton-optimization.prng :refer :all])

(-&gt; (dstb)
    draw)
;; 49.618274697336204
</code></pre>
<p>Without more specifications, the <code>draw</code> function will generate a number according to the <code>:uniform</code> distribution between <code>0</code> and <code>100</code>. But you can assign different parameters, the <code>prng</code> to use, its seed or the name of the distribution to use and its parameters:</p>
<pre><code class="language-clojure">(-&gt; (dstb {:dstb-name :exponential
           :params (:rate 12)
           :prng (prng {:seed 123
                        :min 10
                        :max 200
                        :prng-name :xoroshiro128})})
    draw)
;; 83.62588872586284
</code></pre>
<p>See <a href="#leverage-existing-distributions">the existing distribution reference</a> for more details on the possible distributions. Note that any name you add in the registry could be added in the <code>registry</code>.</p>
<p>The drawback of this simple form is that further call of that <code>draw</code> function will return the same value again and again. To have more than one drawing, you should define a <code>prng</code> first, and then call the <code>draw</code> function as needed with that <code>prng</code>. Note this is also more efficient from a computational point of view.</p>
<pre><code class="language-clojure">(def ud
  (dstb {:params {:a 12
                  :b 15}}))

(draw ud) ;;12.164821013036297
(draw ud) ;;13.81793789260508
(draw ud) ;;12.947625088830756
;;Note that values will be different for you as this form depends on execution time.
</code></pre>
<h1><a href="#existing-distributions" id="existing-distributions"></a>Existing distributions</h1>
<p>Distributions are:</p>
<ul>
<li><code>:weibull</code></li>
<li><code>:beta</code></li>
<li><code>:bernoulli</code></li>
<li><code>:dirichlet-multinomial</code></li>
<li><code>:chi-squared</code></li>
<li><code>:normal</code></li>
<li><code>:log-normal</code></li>
<li><code>:cauchy</code></li>
<li><code>:uniform</code></li>
<li><code>:pareto</code></li>
<li><code>:dirichlet</code></li>
<li><code>:exponential</code></li>
<li><code>:categorical</code></li>
<li><code>:gamma</code></li>
<li><code>:binomial</code></li>
<li><code>:poisson</code></li>
<li><code>:beta-binomial</code></li>
<li><code>:f</code></li>
<li><code>:multinomial</code></li>
<li><code>:t</code></li>
</ul>
<p>Note that you can extend/superseed this registry by updating the <code>distribution-registry</code> map, and then use the <code>build</code> function.</p>
<h1><a href="#enriching-the-library-with-a-new-distribution" id="enriching-the-library-with-a-new-distribution"></a>Enriching the library with a new distribution</h1>
<p>Implementing a new distribution starts with the definition of a <code>defrecord</code> implementing the <code>Distribution</code> protocol, as defined in <code>automaton-optimization.distribution.distribution-protocol</code>.</p>
<p>When done, the registry should be enriched with this distribution and be used in the <code>dstb</code>.</p>
<p>Letâ€™s illustrate with a uniform distribution creation:</p>
<pre><code class="language-clojure">(require '[automaton-optimization.distribution.distribution-protocol :as opt-distribution-prot]
         '[automaton-optimization.prng.stateful :as opt-prng-stateful]
         '[automaton-optimization.maths         :as opt-maths])

(defrecord UniformDemo [prng a b width]
  opt-distribution-prot/Distribution
    (draw [_] (opt-prng-stateful/as-double prng a b))
    (median [_] (/ (+ a b) 2.0))
    (cumulative [_ p]
      (cond
        (&lt;= p a) 0.0
        (&gt;= p b) 1.0
        :else (/ (- p a) width)))
    (minimum [_] (reduce opt-maths/min [a b]))
    (maximum [_] (reduce opt-maths/max [a b]))
    (quantile [_ p]
      (cond
        (zero? p) a
        (= p 1.0) b
        :else (+ a (* p width)))))

(def extended-dist-registry 
   (assoc distribution-registry
          :uniform-demo 
          (fn [prng {:keys [a b]}]
             (-&gt;UniformDemo prng a b))))

(-&gt; {:registry extended-dist-registry}
    dstb
    draw)
;; 49.618274697336204
</code></pre>
</div></div></div></body></html>